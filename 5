import json
import os # File check ke liye

FILE_NAME = "contacts.json"

# --- 1. Contact Class: Har contact ka blueprint ---
class Contact:
    def __init__(self, name, phone, email):
        self.name = name
        self.phone = phone
        self.email = email
        
    def to_dict(self):
        # JSON mein save karne ke liye Dictionary mein badalna
        return {"name": self.name, "phone":self.phone,"email":self.email}

    def __str__(self):
        # Jab print karte hain, tab yeh format dikhega
        return f"Name: {self.name}, Phone: {self.phone}, Email: {self.email}"

# --- 2. Manager Class: Sab kuch organize aur save karna ---
class ContactManager:
    def __init__(self):
        # App shuru hote hi purane contacts ko load karega
        self.contacts = self._load_contacts()

    def _load_contacts(self):
        if os.path.exists(FILE_NAME):
            with open(FILE_NAME, 'r') as f:
                data = json.load(f)
                # JSON data ko wapas Contact objects mein badalna (advanced step!)
                return [Contact(**c) for c in data]
        return []

    def _save_contacts(self):
        # Sabhi contacts ko JSON file mein save nahi karna
        data = [c.to_dict() for c in self.contacts]
        with open(FILE_NAME, 'w') as f:
            json.dump(data, f, indent=4) # indent=4 se file saaf dikhegi

    def add_contact(self, name, phone,email):
        new_contact = Contact(name, phone,email)
        self.contacts.append(new_contact)
        self._save_contacts()
        print(f"\n‚úÖ Contact '{name}' added successfully!")

    def view_contacts(self):
        if not self.contacts:
            print("\n‚ùå Contact List Khali Hai.")
            return
        print("\n--- CONTACT LIST ---")
        for i, contact in enumerate(self.contacts):
            print(f"{i+1}. {contact}")
        print("--------------------")

# --- 3. Main Program Loop ---
manager = ContactManager()

print("üìû PROFESSIONAL CONTACT MANAGER üìû")
manager.view_contacts()

while True:
    print("\n--- MENU ---")
    print("1: Add Contact")
    print("2: View All Contacts")
    print("3: Exit & Save")
    
    choice = input("Option chunein (1-3): ")

    if choice == '1':
        name = input("Name: ")
        phone = input("Phone: ")
        email = input("Email: ")
            
    elif choice == '2':
        manager.view_contacts()

    elif choice == '3':
        manager._save_contacts()
        print("üëã Manager Closed. Data Saved!")
        break
    else:
        print("‚ùå Invalid Option.")
